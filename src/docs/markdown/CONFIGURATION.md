# Configuration

## Application configuration

The configuration for conda-store-ui, including the connection details to conda-store, can be done :
- either at compile time, using a `.env` file.
- or at runtime, using `condaStoreConfig` variable


### At compile time, using `.env`

conda-store-ui looks for a `.env` file when packing the bundle.
Below, you'll find the options and the listed descriptions. You are welcome to copy this configuration, otherwise, you can copy and rename the `.env.example` file provided in the repository.

Sample File:

```.env
REACT_APP_API_URL=http://localhost:8080/conda-store
REACT_APP_AUTH_METHOD=cookie
REACT_APP_LOGIN_PAGE_URL=http://localhost:8080/conda-store/login?next=
REACT_APP_AUTH_TOKEN=
REACT_APP_STYLE_TYPE=green-accent
REACT_APP_SHOW_AUTH_BUTTON=true
REACT_APP_LOGOUT_PAGE_URL=http://localhost:8080/conda-store/logout?next=/
```

### At runtime, using `condaStoreConfig`

When using a webpacked version of `conda-store-ui`, you might want to pass it a configuration.
In your HTML file, add the following **before** loading the react app :

```html
<script>
    const condaStoreConfig = {
        REACT_APP_AUTH_METHOD: "cookie",
        REACT_APP_AUTH_TOKEN: "",
        REACT_APP_STYLE_TYPE: "green-accent",
        REACT_APP_SHOW_AUTH_BUTTON: "true",
        REACT_APP_API_URL: "http://localhost:8080/conda-store",
        REACT_APP_LOGIN_PAGE_URL: "http://localhost:8080/conda-store/login?next=",
        REACT_APP_LOGOUT_PAGE_URL: "http://localhost:8080/conda-store/logout?next=/",
    };
</script>
```


### Options

The possible options are stored in a key-value format.

| Key                | Value  |
|--------------------|--------|
|`REACT_APP_API_URL` | string |

Base API url that will be used when creating RTK Query queries

| Key                    | Value  |
|------------------------|--------|
|`REACT_APP_AUTH_METHOD` | string |

Preferred method of authentication.

Options:

* `cookie`

Lets users authenticate by logging into `conda-store`. This is the preferred method of authentication.

* `token`

Lets users utilize a token generated by `conda-store` to authenticate to the server.

| Key                       | Value  |
|---------------------------|--------|
|`REACT_APP_LOGIN_PAGE_URL` | string |

The URL endpoint used for login authentication.

| Key                        | Value  |
|----------------------------|--------|
|`REACT_APP_LOGOUT_PAGE_URL` | string |

The URL endpoint used for logout authentication.

| Key                    | Value              |
|------------------------|--------------------|
|`REACT_APP_AUTH_TOKEN`  | `null` / `string`  |

If using the `token` method for authentication, then input the token as a string.
Otherwise, leave blank.

| Key                       | Value  |
|---------------------------|--------|
|`REACT_APP_STYLE_TYPE`     | string |

Options:

* `grayscale`

* `green-accent`

| Key                        | Value  |
|----------------------------|--------|
|`REACT_APP_SHOW_AUTH_BUTTON`|  bool  |

Options:

* `true`

Show the login icon in the top menubar.

* `false`

Hide the login icon in the top menubar.

## Docker-compose configuration
By default, docker-compose uses the latest release of conda-store-server, but there could be cases where a devloper wishes to test against a different versions, such as a release candidate.

Adding the `CONDA_STORE_SERVER_VERSION` variable to the `.env` file will allow overriding this default and setting whichever version of conda-store-server is desired.

